<!-- <div class="headline-box">
  <h2>BROOKLYN POOP MAP</h2>
</div> -->

<div class="map-grid">
  <div class="map-content">
    <div class="wireframe-box" style="margin-bottom: 1rem;">
      <p class="dot-matrix">
        This visualization plots all community-reported pet waste sightings across Brooklyn neighborhoods. 
        Each marker represents a precise location where waste was documented by a community member.
      </p>
    </div>
    
    <div class="map-container">
      <div class="ascii-line" style="padding: 0.5rem 0; background-color: #F8F8F8; border-bottom: 1px solid #000000; margin: 0;">
        [ 40.6782°N, 73.9442°W ] BROOKLYN, NY
      </div>
      <div id="map"></div>
    </div>
    
    <div class="two-column" style="margin-top: 1rem;">
      <div class="column" style="border-left: none; padding-left: 0;">
        <a href="/submit" class="button-link" style="display: inline-block;">+ ADD NEW REPORT</a>
      </div>
      <div class="column" style="text-align: right;">
        <div class="technical-label">LAST UPDATED: <%= new Date().toLocaleString() %></div>
      </div>
    </div>
  </div>
  
  <div class="map-sidebar">
    <div class="wireframe-box">
      <h3 class="section-headline" style="font-size: 24px; margin-top: 0;">MAP CONTROLS</h3>
      
      <div class="technical-label">LEGEND</div>
      <div class="legend-item">
        <img src="https://cdn-icons-png.flaticon.com/512/4481/4481132.png" alt="Poop icon" width="24">
        <span>Documented waste sighting</span>
      </div>
      
      <div class="technical-label" style="margin-top: 1.5rem;">INSTRUCTIONS</div>
      <p>
        Click on any marker to view detailed information about the reported sighting.
      </p>
      <p>
        Zoom in/out using the controls or mouse wheel to explore specific neighborhoods in detail.
      </p>
      
      <div class="technical-label" style="margin-top: 1.5rem;">STATISTICS</div>
      <div class="stat-counter" style="font-size: 48px;">0</div>
      <div class="stat-label">TOTAL REPORTS</div>
    </div>
    
    <div class="wireframe-box" style="margin-top: 1rem;">
      <div class="technical-label">AREAS OF INTEREST</div>
      <ul>
        <li>Park Slope</li>
        <li>Williamsburg</li>
        <li>DUMBO</li>
        <li>Prospect Heights</li>
        <li>Greenpoint</li>
      </ul>
    </div>
  </div>
</div>

<script src="/js/map.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get the poop data from the server
    const poopData = JSON.parse('<%- poopData %>');
    
    // Initialize the map with the poop data
    const map = initMap(poopData);
    
    // Update stats counter
    document.querySelectorAll('.stat-counter').forEach(counter => {
      counter.textContent = poopData.length;
    });
  });
</script> 